var Q=Object.defineProperty;var E=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var I=(f,e,l)=>e in f?Q(f,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):f[e]=l,T=(f,e)=>{for(var l in e||(e={}))q.call(e,l)&&I(f,l,e[l]);if(E)for(var l of E(e))A.call(e,l)&&I(f,l,e[l]);return f};import{b as w,a as M,s as J,y as X}from"./element-plus@2.9.10_vue@3.5.14-e58ff881.js";import{c as j,d as G,e as K}from"./category-2962f30d.js";import W from"./add-or-update-c7b7f7e4.js";import{_ as Y,t as Z}from"./index-6f2da097.js";import{$ as b}from"./_t-d5227884.js";import{q as tt,D as et,b as ot,y as u}from"./@vue_reactivity@3.5.14-2213b677.js";import{g as it,a1 as at,o as i,c as m,a as p,J as C,H as s,I as r,M as n,F as S,X as U,L as g,n as st}from"./@vue_runtime-core@3.5.14-81aa8ddd.js";import{U as k,s as L}from"./@vue_shared@3.5.14-94c2c668.js";import"./@vue-06e0889c.js";import"./lodash-es@4.17.21-e2bba480.js";import"./@vueuse_shared@9.13.0_vue@3.5.14-f0e16060.js";import"./@vueuse_core@9.13.0_vue@3.5.14-f98106e7.js";import"./@vue_runtime-dom@3.5.14-7e661aa4.js";import"./@element-plus_icons-vue@2.3.1_vue@3.5.14-71698097.js";import"./@sxzz_popperjs-es@2.11.7-7c8154ca.js";import"./@ctrl_tinycolor@3.6.1-86a38320.js";import"./dayjs@1.11.13-c188735a.js";import"./@intlify_core-base@9.2.2-93f07292.js";import"./@intlify_message-compiler@9.2.2-228be59b.js";import"./@intlify_shared@9.2.2-29bf9385.js";import"./source-map@0.6.1-02de534d.js";import"./@intlify_devtools-if@9.2.2-22850edc.js";import"./async-validator@4.2.5-774c2804.js";import"./memoize-one@6.0.0-297ddbcb.js";import"./normalize-wheel-es@1.2.0-ed76fb12.js";import"./@floating-ui_dom@1.7.0-586b25a4.js";import"./@floating-ui_core@1.7.0-7ff28a0e.js";import"./@floating-ui_utils@0.2.9-746d277c.js";import"./index-17e7a6f7.js";import"./index-e4ea1e4c.js";import"./index-f854da1e.js";import"./big.js@6.2.1-49ab783c.js";import"./pinia@2.3.1_vue@3.5.14-4833dba6.js";import"./vue-demi@0.14.10_vue@3.5.14-71ba0ef2.js";import"./vue-router@4.5.1_vue@3.5.14-0f6ed4bc.js";import"./vue-i18n@9.2.2_vue@3.5.14-cf205787.js";import"./vue@3.5.14-dfc94670.js";import"./vue-cookies@1.8.3-f66fc855.js";import"./@element-plus_icons-vue@2.1.0_vue@3.5.14-0cb2d1d1.js";import"./axios@1.4.0-e76ab20a.js";import"./qs@6.11.2-13302ec8.js";import"./side-channel@1.1.0-f5737a48.js";import"./es-errors@1.3.0-c75f5a96.js";import"./object-inspect@1.13.4-95f40997.js";import"./crypto-js@4.1.1-4a4e7433.js";import"./side-channel-list@1.0.0-2bff8a80.js";import"./side-channel-map@1.0.1-ef12932d.js";import"./get-intrinsic@1.3.0-829e561c.js";import"./es-object-atoms@1.1.1-11ea1ab9.js";import"./math-intrinsics@1.1.0-9389030e.js";import"./gopd@1.2.0-f4eec54c.js";import"./es-define-property@1.0.1-88d30046.js";import"./has-symbols@1.1.0-1e41ff1e.js";import"./get-proto@1.0.1-a9f527cc.js";import"./dunder-proto@1.0.1-62f72dc7.js";import"./call-bind-apply-helpers@1.0.2-03b6ca7f.js";import"./function-bind@1.1.2-48f717dc.js";import"./hasown@2.0.2-f810df7c.js";import"./call-bound@1.0.4-15e4d619.js";import"./side-channel-weakmap@1.0.2-460ea971.js";import"./dompurify@3.0.3-4985f3f0.js";import"./moment@2.29.4-4717c495.js";const rt={class:"page-product-category"},nt={class:"filter-container"},lt={class:"category-list"},dt={class:"addr-list"},pt=["onClick"],ct={class:"btn"},ut={class:"tag"},yt={class:"addr-list"},mt=["onClick"],gt={class:"btn"},_t={class:"tag"},kt={class:"addr-list"},ft={class:"dot"},vt={class:"btn"},Ct={class:"tag"},$t={key:3,class:"nodata"},bt={__name:"index",setup(f){const e=tt({resourcesUrl:"http://192.168.1.80:9000/mall4cloud",pageQuery:{pageSize:10,pageNum:1},pageVO:{list:[]},secondList:[],threeList:[],secondItemId:null,firstItemId:null,pageLoading:!0,searchParam:{},addOrUpdateVisible:!1,disable:!1}),{pageVO:l,secondList:B,threeList:V,secondItemId:N,firstItemId:P,addOrUpdateVisible:R}=et(e);it(()=>{O()});const O=()=>{e.pageLoading=!0,j(T(T({},e.pageQuery),e.searchParam)).then(a=>{e.secondList=e.threeList=[],e.pageVO.list=Z(a,"categoryId","parentId"),e.pageLoading=!1})},H=a=>{e.secondList=e.pageVO.list[a].children?e.pageVO.list[a].children:[],e.firstItemId=e.pageVO.list[a].categoryId,e.threeList=[]},z=a=>{e.threeList=e.secondList[a].children?e.secondList[a].children:[],e.secondItemId=e.secondList[a].categoryId},x=ot(),h=a=>{e.addOrUpdateVisible=!0,st(()=>{x.value.init(a)})},D=a=>{w.confirm(b("table.sureToDelete"),b("table.tips"),{confirmButtonText:b("table.confirm"),cancelButtonText:b("table.cancel"),type:"warning"}).then(()=>F(a))},F=a=>{G(a).then(()=>{M({message:b("table.actionSuccess"),type:"success",duration:1500,onClose:()=>O()})})},$=(a,o,d)=>{const _={};_.categoryId=a,_.status=o===0?1:0,w.confirm(o===1?"是否确认下架当前分类?":"是否确认上架当前分类?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{K(_).then(y=>{M({message:y&&"操作成功",type:y?"success":"error",duration:1500,onClose:()=>O()})})}).catch(()=>{})};return(a,o)=>{const d=J,_=X,y=at("permission");return i(),m("div",rt,[p("div",nt,[C((i(),s(d,{type:"primary",class:"filter-item",onClick:o[0]||(o[0]=t=>h())},{default:r(()=>[n(k(a.$t("table.create")),1)]),_:1})),[[y,["product:category:save"]]])]),p("div",lt,[u(l).list.length?(i(),m("div",{key:0,class:L(["addr-list-box",u(l).list.length?"active":""])},[p("div",dt,[(i(!0),m(S,null,U(u(l).list,(t,v)=>(i(),m("div",{key:v,class:L(["addr-item",u(P)===t.categoryId?"active":""])},[p("div",{class:"dot",onClick:c=>H(v)},k(t.name),9,pt),p("div",ct,[p("div",ut,[t.status==0?(i(),s(_,{key:0,type:"danger"},{default:r(()=>o[2]||(o[2]=[n(" 下架 ")])),_:1,__:[2]})):(i(),s(_,{key:1},{default:r(()=>o[3]||(o[3]=[n(" 正常 ")])),_:1,__:[3]}))]),C((i(),s(d,{type:"primary",link:"",onClick:c=>h(t.categoryId)},{default:r(()=>o[4]||(o[4]=[n(" 编辑 ")])),_:2,__:[4]},1032,["onClick"])),[[y,["product:category:update"]]]),t.status===0?(i(),s(d,{key:0,type:"primary",link:"",onClick:c=>$(t.categoryId,t.status)},{default:r(()=>[n(k(a.$t("action.putOnShelf")),1)]),_:2},1032,["onClick"])):g("",!0),t.status===1?(i(),s(d,{key:1,type:"primary",link:"",onClick:c=>$(t.categoryId,t.status)},{default:r(()=>[n(k(a.$t("action.offShelf")),1)]),_:2},1032,["onClick"])):g("",!0),C((i(),s(d,{type:"primary",link:"",onClick:c=>D(t.categoryId)},{default:r(()=>o[5]||(o[5]=[n(" 删除 ")])),_:2,__:[5]},1032,["onClick"])),[[y,["product:category:delete"]]])])],2))),128))])],2)):g("",!0),u(B).length?(i(),m("div",{key:1,class:L(["addr-list-box",u(B).length?"active":""])},[p("div",yt,[(i(!0),m(S,null,U(u(B),(t,v)=>(i(),m("div",{key:v,class:L(["addr-item",u(N)===t.categoryId?"active":""])},[p("div",{class:"dot",onClick:c=>z(v)},k(t.name),9,mt),p("div",gt,[p("div",_t,[t.status==0?(i(),s(_,{key:0,type:"danger"},{default:r(()=>o[6]||(o[6]=[n(" 下架 ")])),_:1,__:[6]})):(i(),s(_,{key:1},{default:r(()=>o[7]||(o[7]=[n(" 正常 ")])),_:1,__:[7]}))]),C((i(),s(d,{type:"primary",link:"",onClick:c=>h(t.categoryId)},{default:r(()=>o[8]||(o[8]=[n(" 编辑 ")])),_:2,__:[8]},1032,["onClick"])),[[y,["product:category:update"]]]),t.status===0?(i(),s(d,{key:0,type:"primary",link:"",onClick:c=>$(t.categoryId,t.status)},{default:r(()=>[n(k(a.$t("action.putOnShelf")),1)]),_:2},1032,["onClick"])):g("",!0),t.status===1?(i(),s(d,{key:1,type:"primary",link:"",onClick:c=>$(t.categoryId,t.status)},{default:r(()=>[n(k(a.$t("action.offShelf")),1)]),_:2},1032,["onClick"])):g("",!0),C((i(),s(d,{type:"primary",link:"",onClick:c=>D(t.categoryId)},{default:r(()=>o[9]||(o[9]=[n(" 删除 ")])),_:2,__:[9]},1032,["onClick"])),[[y,["product:category:delete"]]])])],2))),128))])],2)):g("",!0),u(V).length?(i(),m("div",{key:2,class:L(["addr-list-box",u(V).length?"active":""])},[p("div",kt,[(i(!0),m(S,null,U(u(V),(t,v)=>(i(),m("div",{key:v,class:"addr-item"},[p("div",ft,k(t.name),1),p("div",vt,[p("div",Ct,[t.status==0?(i(),s(_,{key:0,type:"danger"},{default:r(()=>o[10]||(o[10]=[n(" 下架 ")])),_:1,__:[10]})):(i(),s(_,{key:1},{default:r(()=>o[11]||(o[11]=[n(" 正常 ")])),_:1,__:[11]}))]),C((i(),s(d,{type:"primary",link:"",onClick:c=>h(t.categoryId)},{default:r(()=>o[12]||(o[12]=[n(" 编辑 ")])),_:2,__:[12]},1032,["onClick"])),[[y,["product:category:update"]]]),t.status===0?(i(),s(d,{key:0,type:"primary",link:"",onClick:c=>$(t.categoryId,t.status)},{default:r(()=>[n(k(a.$t("action.putOnShelf")),1)]),_:2},1032,["onClick"])):g("",!0),t.status===1?(i(),s(d,{key:1,type:"primary",link:"",onClick:c=>$(t.categoryId,t.status)},{default:r(()=>[n(k(a.$t("action.offShelf")),1)]),_:2},1032,["onClick"])):g("",!0),C((i(),s(d,{type:"primary",link:"",onClick:c=>D(t.categoryId)},{default:r(()=>o[13]||(o[13]=[n(" 删除 ")])),_:2,__:[13]},1032,["onClick"])),[[y,["product:category:delete"]]])])]))),128))])],2)):g("",!0),u(l).list.length?g("",!0):(i(),m("div",$t," 暂无数据 "))]),u(R)?(i(),s(W,{key:0,ref_key:"addOrUpdateRef",ref:x,onRefreshDataList:o[1]||(o[1]=t=>O())},null,512)):g("",!0)])}}},xe=Y(bt,[["__scopeId","data-v-f6bf9038"]]);export{xe as default};

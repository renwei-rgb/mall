import{a as q,q as D,r as R,v as w,w as B,p as C,s as O,G as S}from"./element-plus@2.9.10_vue@3.5.14-e58ff881.js";import{_ as L}from"./index-f854da1e.js";import{y as A,z as M,A as T}from"./index-6f2da097.js";import{l as z}from"./role-88be7d52.js";import{$ as G}from"./_t-d5227884.js";import{q as H,D as X,b as j,y as t,a as x}from"./@vue_reactivity@3.5.14-2213b677.js";import{o as u,H as c,I as m,a as J,i as a,M as b,c as K,F as P,X as Q,n as W}from"./@vue_runtime-core@3.5.14-81aa8ddd.js";import{U as _}from"./@vue_shared@3.5.14-94c2c668.js";import"./@vue-06e0889c.js";import"./lodash-es@4.17.21-e2bba480.js";import"./@vueuse_shared@9.13.0_vue@3.5.14-f0e16060.js";import"./@vueuse_core@9.13.0_vue@3.5.14-f98106e7.js";import"./@vue_runtime-dom@3.5.14-7e661aa4.js";import"./@element-plus_icons-vue@2.3.1_vue@3.5.14-71698097.js";import"./@sxzz_popperjs-es@2.11.7-7c8154ca.js";import"./@ctrl_tinycolor@3.6.1-86a38320.js";import"./dayjs@1.11.13-c188735a.js";import"./@intlify_core-base@9.2.2-93f07292.js";import"./@intlify_message-compiler@9.2.2-228be59b.js";import"./@intlify_shared@9.2.2-29bf9385.js";import"./source-map@0.6.1-02de534d.js";import"./@intlify_devtools-if@9.2.2-22850edc.js";import"./async-validator@4.2.5-774c2804.js";import"./memoize-one@6.0.0-297ddbcb.js";import"./normalize-wheel-es@1.2.0-ed76fb12.js";import"./@floating-ui_dom@1.7.0-586b25a4.js";import"./@floating-ui_core@1.7.0-7ff28a0e.js";import"./@floating-ui_utils@0.2.9-746d277c.js";import"./big.js@6.2.1-49ab783c.js";import"./pinia@2.3.1_vue@3.5.14-4833dba6.js";import"./vue-demi@0.14.10_vue@3.5.14-71ba0ef2.js";import"./vue-router@4.5.1_vue@3.5.14-0f6ed4bc.js";import"./vue-i18n@9.2.2_vue@3.5.14-cf205787.js";import"./vue@3.5.14-dfc94670.js";import"./vue-cookies@1.8.3-f66fc855.js";import"./@element-plus_icons-vue@2.1.0_vue@3.5.14-0cb2d1d1.js";import"./axios@1.4.0-e76ab20a.js";import"./qs@6.11.2-13302ec8.js";import"./side-channel@1.1.0-f5737a48.js";import"./es-errors@1.3.0-c75f5a96.js";import"./object-inspect@1.13.4-95f40997.js";import"./crypto-js@4.1.1-4a4e7433.js";import"./side-channel-list@1.0.0-2bff8a80.js";import"./side-channel-map@1.0.1-ef12932d.js";import"./get-intrinsic@1.3.0-829e561c.js";import"./es-object-atoms@1.1.1-11ea1ab9.js";import"./math-intrinsics@1.1.0-9389030e.js";import"./gopd@1.2.0-f4eec54c.js";import"./es-define-property@1.0.1-88d30046.js";import"./has-symbols@1.1.0-1e41ff1e.js";import"./get-proto@1.0.1-a9f527cc.js";import"./dunder-proto@1.0.1-62f72dc7.js";import"./call-bind-apply-helpers@1.0.2-03b6ca7f.js";import"./function-bind@1.1.2-48f717dc.js";import"./hasown@2.0.2-f810df7c.js";import"./call-bound@1.0.4-15e4d619.js";import"./side-channel-weakmap@1.0.2-460ea971.js";import"./dompurify@3.0.3-4985f3f0.js";import"./moment@2.29.4-4717c495.js";const Y={class:"dialog-footer"},ro={__name:"add-or-update",emits:["refreshDataList"],setup(Z,{expose:v,emit:V}){const g=V,s=H({visible:!1,dataForm:{sysUserId:0,shopId:null,nickName:null,avatar:null,code:null,phoneNum:null,hasAccount:null,roleIds:[]},roleOpts:[],dataRule:{nickName:[{required:!0,message:"昵称不能为空",trigger:"blur"}],avatar:[{required:!0,message:"头像不能为空",trigger:"blur"}]}}),{visible:i,dataForm:r,roleOpts:F,dataRule:N}=X(s),n=j(),U=l=>{s.dataForm.sysUserId=l||0,s.visible=!0,W(()=>{n.value.resetFields(),z().then(e=>{s.roleOpts=e}),s.dataForm.sysUserId&&A(l).then(e=>{s.dataForm=e})})},k=()=>{n.value.validate(l=>{l&&(s.dataForm.sysUserId?M(s.dataForm):T(s.dataForm)).then(()=>{q({message:G("table.actionSuccess"),type:"success",duration:1500,onClose:()=>{s.visible=!1,g("refreshDataList"),n.value.resetFields()}})})})};return v({init:U}),(l,e)=>{const d=D,p=R,y=L,I=w,$=B,E=C,f=O,h=S;return u(),c(h,{modelValue:t(i),"onUpdate:modelValue":e[7]||(e[7]=o=>x(i)?i.value=o:null),class:"component-sys-user-add-or-update",title:t(r).sysUserId?l.$t("table.edit"):l.$t("table.create")},{footer:m(()=>[J("div",Y,[a(f,{onClick:e[5]||(e[5]=o=>i.value=!1)},{default:m(()=>[b(_(l.$t("table.cancel")),1)]),_:1}),a(f,{type:"primary",onClick:e[6]||(e[6]=o=>k())},{default:m(()=>[b(_(l.$t("table.confirm")),1)]),_:1})])]),default:m(()=>[a(E,{ref_key:"dataFormRef",ref:n,rules:t(N),model:t(r),"label-position":"right","label-width":"80px"},{default:m(()=>[a(p,{label:l.$t("platform.shopUser.nickName"),prop:"nickName"},{default:m(()=>[a(d,{modelValue:t(r).nickName,"onUpdate:modelValue":e[0]||(e[0]=o=>t(r).nickName=o)},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:l.$t("platform.shopUser.avatar"),prop:"avatar","label-width":"80px"},{default:m(()=>[a(y,{modelValue:t(r).avatar,"onUpdate:modelValue":e[1]||(e[1]=o=>t(r).avatar=o)},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:l.$t("platform.shopUser.code"),prop:"code"},{default:m(()=>[a(d,{modelValue:t(r).code,"onUpdate:modelValue":e[2]||(e[2]=o=>t(r).code=o)},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:l.$t("platform.shopUser.phoneNum"),prop:"phoneNum"},{default:m(()=>[a(d,{modelValue:t(r).phoneNum,"onUpdate:modelValue":e[3]||(e[3]=o=>t(r).phoneNum=o)},null,8,["modelValue"])]),_:1},8,["label"]),a(p,{label:"选择角色",prop:"roleIds"},{default:m(()=>[a($,{modelValue:t(r).roleIds,"onUpdate:modelValue":e[4]||(e[4]=o=>t(r).roleIds=o),multiple:"",placeholder:"请选择",style:{width:"60%"}},{default:m(()=>[(u(!0),K(P,null,Q(t(F),o=>(u(),c(I,{key:o.roleId,label:o.roleName,value:o.roleId},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue","title"])}}};export{ro as default};

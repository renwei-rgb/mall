import{a as T,q as z,r as A,C as H,p as P,s as j,G as J}from"./element-plus@2.9.10_vue@3.5.14-e58ff881.js";import{_ as K}from"./index-17e7a6f7.js";import{_ as Q}from"./index-e4ea1e4c.js";import{_ as W}from"./index-f854da1e.js";import{g as X,u as Y,s as Z}from"./category-2962f30d.js";import{$ as u}from"./_t-d5227884.js";import{_ as ee}from"./index-6f2da097.js";import{q as te,D as oe,b as C,y as r,a as re}from"./@vue_reactivity@3.5.14-2213b677.js";import{o as c,H as d,I as i,a as le,i as l,M as v,c as ae,L as g,n as V}from"./@vue_runtime-core@3.5.14-81aa8ddd.js";import{U as f}from"./@vue_shared@3.5.14-94c2c668.js";import"./@vue-06e0889c.js";import"./lodash-es@4.17.21-e2bba480.js";import"./@vueuse_shared@9.13.0_vue@3.5.14-f0e16060.js";import"./@vueuse_core@9.13.0_vue@3.5.14-f98106e7.js";import"./@vue_runtime-dom@3.5.14-7e661aa4.js";import"./@element-plus_icons-vue@2.3.1_vue@3.5.14-71698097.js";import"./@sxzz_popperjs-es@2.11.7-7c8154ca.js";import"./@ctrl_tinycolor@3.6.1-86a38320.js";import"./dayjs@1.11.13-c188735a.js";import"./@intlify_core-base@9.2.2-93f07292.js";import"./@intlify_message-compiler@9.2.2-228be59b.js";import"./@intlify_shared@9.2.2-29bf9385.js";import"./source-map@0.6.1-02de534d.js";import"./@intlify_devtools-if@9.2.2-22850edc.js";import"./async-validator@4.2.5-774c2804.js";import"./memoize-one@6.0.0-297ddbcb.js";import"./normalize-wheel-es@1.2.0-ed76fb12.js";import"./@floating-ui_dom@1.7.0-586b25a4.js";import"./@floating-ui_core@1.7.0-7ff28a0e.js";import"./@floating-ui_utils@0.2.9-746d277c.js";import"./big.js@6.2.1-49ab783c.js";import"./pinia@2.3.1_vue@3.5.14-4833dba6.js";import"./vue-demi@0.14.10_vue@3.5.14-71ba0ef2.js";import"./vue-router@4.5.1_vue@3.5.14-0f6ed4bc.js";import"./vue-i18n@9.2.2_vue@3.5.14-cf205787.js";import"./vue@3.5.14-dfc94670.js";import"./vue-cookies@1.8.3-f66fc855.js";import"./@element-plus_icons-vue@2.1.0_vue@3.5.14-0cb2d1d1.js";import"./axios@1.4.0-e76ab20a.js";import"./qs@6.11.2-13302ec8.js";import"./side-channel@1.1.0-f5737a48.js";import"./es-errors@1.3.0-c75f5a96.js";import"./object-inspect@1.13.4-95f40997.js";import"./crypto-js@4.1.1-4a4e7433.js";import"./side-channel-list@1.0.0-2bff8a80.js";import"./side-channel-map@1.0.1-ef12932d.js";import"./get-intrinsic@1.3.0-829e561c.js";import"./es-object-atoms@1.1.1-11ea1ab9.js";import"./math-intrinsics@1.1.0-9389030e.js";import"./gopd@1.2.0-f4eec54c.js";import"./es-define-property@1.0.1-88d30046.js";import"./has-symbols@1.1.0-1e41ff1e.js";import"./get-proto@1.0.1-a9f527cc.js";import"./dunder-proto@1.0.1-62f72dc7.js";import"./call-bind-apply-helpers@1.0.2-03b6ca7f.js";import"./function-bind@1.1.2-48f717dc.js";import"./hasown@2.0.2-f810df7c.js";import"./call-bound@1.0.4-15e4d619.js";import"./side-channel-weakmap@1.0.2-460ea971.js";import"./dompurify@3.0.3-4985f3f0.js";import"./moment@2.29.4-4717c495.js";const se={key:0},ie={class:"dialog-footer"},me={__name:"add-or-update",emits:["refreshDataList"],setup(ne,{expose:S,emit:h}){const F=h,e=te({visible:!1,dataForm:{categoryId:0,shopId:null,parentId:0,name:null,desc:null,path:null,status:"1",icon:"",imgUrl:"",level:null,seq:1},showCategorySelectBtn:!0,categoryList:[],categorySelectorVisible:!1,selectedCategories:[],showSelectColumnOfCategory:!0,rules:{name:[{required:!0,message:u("product.category.categoryNoNull"),trigger:"blur"}],imgUrl:[{required:!0,message:u("product.category.imageNoNull"),trigger:"blur"}]}}),{visible:n,dataForm:a,showCategorySelectBtn:w,categorySelectorVisible:$,selectedCategories:U,showSelectColumnOfCategory:I,rules:k}=oe(e),p=C(),N=o=>{e.visible=!0,e.dataForm.categoryId=o||0,V(()=>{p.value.resetFields(),e.dataForm.categoryId&&o&&X(o).then(t=>{e.dataForm=t,e.selectedCategories=t.pathNames?t.pathNames:[],e.showCategorySelectBtn=!1,t.level===0?e.showSelectColumnOfCategory=!1:e.showSelectColumnOfCategory=!0})})},q=()=>{e.selectedCategories=[],e.showCategorySelectBtn=!0,e.showSelectColumnOfCategory=!0},_=C(),B=()=>{e.categorySelectorVisible=!0,V(()=>{_.value.init(1)})},O=(o,t)=>{e.categorySelectorVisible=!1,e.selectedCategories=o,e.dataForm.parentId=t},E=()=>{p.value.validate(o=>{if(!o)return;e.dataForm.level=e.selectedCategories.length?e.selectedCategories.length:0,(e.dataForm.categoryId?Y(e.dataForm):Z(e.dataForm)).then(()=>{T({message:u("table.actionSuccess"),type:"success",duration:1500,onClose:()=>{e.visible=!1,F("refreshDataList"),p.value.resetFields()}})})})};return S({init:N}),(o,t)=>{const R=z,m=A,y=W,D=Q,L=H,x=P,b=j,G=K,M=J;return c(),d(M,{modelValue:r(n),"onUpdate:modelValue":t[6]||(t[6]=s=>re(n)?n.value=s:null),title:r(a).categoryId?o.$t("table.edit"):o.$t("table.create"),"close-on-click-modal":!1,class:"component-category-add-or-update",top:"10vh",width:"750px",onClose:q},{footer:i(()=>[le("div",ie,[l(b,{onClick:t[4]||(t[4]=s=>n.value=!1)},{default:i(()=>[v(f(o.$t("table.cancel")),1)]),_:1}),l(b,{type:"primary",onClick:t[5]||(t[5]=s=>E())},{default:i(()=>[v(f(o.$t("table.confirm")),1)]),_:1})])]),default:i(()=>[l(x,{ref_key:"dataFormRef",ref:p,rules:r(k),model:r(a),"label-width":"90px",class:"category-form",style:{width:"500px","margin-left":"50px"}},{default:i(()=>[l(m,{label:o.$t("product.category.name"),prop:"name"},{default:i(()=>[l(R,{modelValue:r(a).name,"onUpdate:modelValue":t[0]||(t[0]=s=>r(a).name=s),placeholder:o.$t("product.category.enterCateName"),maxlength:"255"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(m,{label:o.$t("product.category.imgUrl"),prop:"imgUrl"},{default:i(()=>[l(y,{modelValue:r(a).imgUrl,"onUpdate:modelValue":t[1]||(t[1]=s=>r(a).imgUrl=s)},null,8,["modelValue"]),r(a).parentId===0?(c(),ae("span",se,f(o.$t("product.category.recommImgSize")+"510*80"),1)):g("",!0)]),_:1},8,["label"]),l(m,{label:o.$t("product.category.icon"),prop:"icon"},{default:i(()=>[l(y,{modelValue:r(a).icon,"onUpdate:modelValue":t[2]||(t[2]=s=>r(a).icon=s)},null,8,["modelValue"])]),_:1},8,["label"]),r(I)?(c(),d(m,{key:0,label:o.$t("product.category.categoryParent")},{default:i(()=>[l(D,{"selected-categories":r(U),"show-category-select-btn":r(w),single:!0,onSelectOrReviseCategory:B},null,8,["selected-categories","show-category-select-btn"])]),_:1},8,["label"])):g("",!0),l(m,{label:o.$t("product.category.seq"),prop:"seq"},{default:i(()=>[l(L,{modelValue:r(a).seq,"onUpdate:modelValue":t[3]||(t[3]=s=>r(a).seq=s),min:0,"controls-position":"right",precision:0},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"]),r($)?(c(),d(G,{key:0,ref_key:"categorySelectorRef",ref:_,onGetCategorySelected:O},null,512)):g("",!0)]),_:1},8,["modelValue","title"])}}},yt=ee(me,[["__scopeId","data-v-5b3221d9"]]);export{yt as default};

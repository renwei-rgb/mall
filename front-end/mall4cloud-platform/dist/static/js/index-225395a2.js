var re=Object.defineProperty;var N=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var w=(u,t,l)=>t in u?re(u,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):u[t]=l,k=(u,t)=>{for(var l in t||(t={}))ne.call(t,l)&&w(u,l,t[l]);if(N)for(var l of N(t))se.call(t,l)&&w(u,l,t[l]);return u};import{b as le,a as ie,q as de,r as pe,H as me,s as ue,p as ce,I as ge,F as _e,J as fe,x as ye,y as be,A as Ie,K as ve}from"./element-plus@2.9.10_vue@3.5.14-e58ff881.js";import{_ as he}from"./index-36ae634a.js";import{v as Pe}from"./@vue_runtime-dom@3.5.14-7e661aa4.js";import{p as Ce,d as Se}from"./list-cce0e6af.js";import{c as ke}from"./category-2962f30d.js";import xe from"./prod-details-64c08b51.js";import{_ as Ve,t as Fe}from"./index-6f2da097.js";import{q as Ee,D as Ne,b as x,y as i,a as L}from"./@vue_reactivity@3.5.14-2213b677.js";import{g as we,o as _,c as Le,a as n,i as r,I as s,M as d,H as f,L as y,J as Te,n as Be}from"./@vue_runtime-core@3.5.14-81aa8ddd.js";import{U as v}from"./@vue_shared@3.5.14-94c2c668.js";import"./@vue-06e0889c.js";import"./lodash-es@4.17.21-e2bba480.js";import"./@vueuse_shared@9.13.0_vue@3.5.14-f0e16060.js";import"./@vueuse_core@9.13.0_vue@3.5.14-f98106e7.js";import"./@element-plus_icons-vue@2.3.1_vue@3.5.14-71698097.js";import"./@sxzz_popperjs-es@2.11.7-7c8154ca.js";import"./@ctrl_tinycolor@3.6.1-86a38320.js";import"./dayjs@1.11.13-c188735a.js";import"./@intlify_core-base@9.2.2-93f07292.js";import"./@intlify_message-compiler@9.2.2-228be59b.js";import"./@intlify_shared@9.2.2-29bf9385.js";import"./source-map@0.6.1-02de534d.js";import"./@intlify_devtools-if@9.2.2-22850edc.js";import"./async-validator@4.2.5-774c2804.js";import"./memoize-one@6.0.0-297ddbcb.js";import"./normalize-wheel-es@1.2.0-ed76fb12.js";import"./@floating-ui_dom@1.7.0-586b25a4.js";import"./@floating-ui_core@1.7.0-7ff28a0e.js";import"./@floating-ui_utils@0.2.9-746d277c.js";import"./index-e4ea1e4c.js";import"./big.js@6.2.1-49ab783c.js";import"./vue-router@4.5.1_vue@3.5.14-0f6ed4bc.js";import"./pinia@2.3.1_vue@3.5.14-4833dba6.js";import"./vue-demi@0.14.10_vue@3.5.14-71ba0ef2.js";import"./vue-i18n@9.2.2_vue@3.5.14-cf205787.js";import"./vue@3.5.14-dfc94670.js";import"./vue-cookies@1.8.3-f66fc855.js";import"./@element-plus_icons-vue@2.1.0_vue@3.5.14-0cb2d1d1.js";import"./axios@1.4.0-e76ab20a.js";import"./qs@6.11.2-13302ec8.js";import"./side-channel@1.1.0-f5737a48.js";import"./es-errors@1.3.0-c75f5a96.js";import"./object-inspect@1.13.4-95f40997.js";import"./crypto-js@4.1.1-4a4e7433.js";import"./side-channel-list@1.0.0-2bff8a80.js";import"./side-channel-map@1.0.1-ef12932d.js";import"./get-intrinsic@1.3.0-829e561c.js";import"./es-object-atoms@1.1.1-11ea1ab9.js";import"./math-intrinsics@1.1.0-9389030e.js";import"./gopd@1.2.0-f4eec54c.js";import"./es-define-property@1.0.1-88d30046.js";import"./has-symbols@1.1.0-1e41ff1e.js";import"./get-proto@1.0.1-a9f527cc.js";import"./dunder-proto@1.0.1-62f72dc7.js";import"./call-bind-apply-helpers@1.0.2-03b6ca7f.js";import"./function-bind@1.1.2-48f717dc.js";import"./hasown@2.0.2-f810df7c.js";import"./call-bound@1.0.4-15e4d619.js";import"./side-channel-weakmap@1.0.2-460ea971.js";import"./dompurify@3.0.3-4985f3f0.js";import"./moment@2.29.4-4717c495.js";const Re={class:"page-product-list"},De={class:"screening-conditions"},Me={class:"condition-line"},Ue={class:"condition-line"},qe={class:"cumulative-sales range-box"},ze={class:"unit-wrapper first-iterm"},Qe={class:"unit-wrapper"},Oe={class:"current-pirce range-box"},Ae={class:"unit-wrapper first-iterm"},He={class:"unit-wrapper"},$e={class:"condition-line"},Je={class:"operation-box"},je={class:"prod-opration"},Ge={class:"select-prod-status"},Ke={class:"prod-form"},We={class:"prod-name-box can-edit-item"},Xe={class:"prod-img"},Ye={class:"prod-name"},Ze={class:"prod-price-box"},et={class:"name"},tt={class:"prod-price-box"},ot={class:"name"},at={class:"seq-box can-edit-item"},rt={class:"name"},nt={class:"page-number"},st={__name:"index",setup(u){const t=Ee({resourcesUrl:"http://192.168.1.80:9000/mall4cloud",dataForm:{},selectedMenu:[],categoryList:[],categoryListTreeProps:{value:"categoryId",label:"name"},prodStatusRadio:0,currentMoveSpuId:"",checkAll:!1,isIndeterminate:!1,checkedCount:0,selectedProdList:[],searchParam:{},pageQuery:{pageSize:10,pageNum:1},pageVO:{list:[],total:0,pages:0},pageLoading:!0,prodDetailsVisible:!1,spuId:null}),{dataForm:l,selectedMenu:h,categoryList:T,categoryListTreeProps:B,prodStatusRadio:P,pageQuery:V,pageVO:C,prodDetailsVisible:R}=Ne(t);we(()=>{g(),M()});const D=()=>{t.pageQuery.pageNum=1;const o=t.dataForm.currentPriceBeginInp?t.dataForm.currentPriceBeginInp*100:void 0,e=t.dataForm.currentPriceEndInp?t.dataForm.currentPriceEndInp*100:void 0;t.searchParam={spuId:t.dataForm.prodId||void 0,partyCode:t.dataForm.prodCode||void 0,keyword:t.dataForm.prodName||void 0,primaryCategoryId:t.dataForm.primaryCategoryId||void 0,secondaryCategoryId:t.dataForm.secondaryCategoryId||void 0,categoryId:t.dataForm.categoryId||void 0,minSaleNum:t.dataForm.saleBeginInp||void 0,maxSaleNum:t.dataForm.saleEndInp||void 0,minPrice:o,maxPrice:e,isCompose:t.dataForm.currentyuPreSaleStatus===""?void 0:t.dataForm.currentyuPreSaleStatus,dataType:parseInt(t.prodStatusRadio)},g()},g=()=>{t.pageLoading=!0,Ce(k(k({},t.pageQuery),t.searchParam)).then(o=>{t.pageVO=o,t.pageVO.list.forEach(e=>{e.exhibitionProdName=e.name,e.exhibitionSeq=e.seq,e.priceFee=e.priceFee/100,e.marketPriceFee=e.marketPriceFee/100}),t.pageLoading=!1})},M=()=>{t.pageLoading=!0,ke().then(o=>{t.categoryList=Fe(o,"categoryId","parentId"),t.pageLoading=!1})},U=o=>{t.dataForm.primaryCategoryId=void 0,t.dataForm.secondaryCategoryId=void 0,t.dataForm.categoryId=void 0,o.length===1?t.dataForm.primaryCategoryId=o[0]:o.length===2?t.dataForm.secondaryCategoryId=o[1]:o.length===3&&(t.dataForm.categoryId=o[2])},q=()=>{const o=parseInt(t.prodStatusRadio);t.checkAll=!1,t.pageQuery.pageNum=1,t.searchParam={dataType:o},g()},F=x(),z=o=>{t.prodDetailsVisible=!0,Be(()=>{F.value.init(o)})},Q=o=>{const e=o.length;t.checkedCount=e,t.checkAll=e===t.pageVO.list.length,t.isIndeterminate=e>0&&e<t.pageVO.list.length;const p=[];o.length>0&&o.forEach(c=>{p.push(c.spuId)}),t.selectedProdList=p},O=x(),A=o=>{j(),t.pageQuery.pageNum=1;const e=o.order==="ascending"?1:o.order==="descending"?0:void 0;o.prop==="priceFee"?t.searchParam={priceFeeSort:e}:o.prop==="marketPriceFee"?t.searchParam={marketPriceFeeSort:e}:o.prop==="saleNum"?t.searchParam={saleNumSort:e}:o.prop==="totalStock"?t.searchParam={stockSort:e}:o.prop==="seq"?t.searchParam={seqSort:e}:o.prop==="createTime"&&(t.searchParam={createTimeSort:e}),g()},H=o=>{le.confirm("是否确认删除该商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Se(o).then(()=>{ie({message:"商品删除成功",type:"success",duration:1e3,onClose:()=>g()})})}).catch(()=>{})},$=o=>{t.currentMoveSpuId=o.spuId},J=()=>{t.currentMoveSpuId=""},E=x(),j=()=>{E.value.click()},G=o=>{t.pageQuery.pageSize=o,t.pageQuery.pageNum=1,g()},K=o=>{t.pageQuery.pageNum=o,g()};return(o,e)=>{const p=de,c=pe,W=me,S=ue,X=ce,b=ge,Y=_e,Z=he,ee=fe,m=ye,I=be,te=Ie,oe=ve;return _(),Le("div",Re,[n("div",De,[r(X,{inline:!0,model:i(l)},{default:s(()=>[n("div",Me,[r(c,{label:"商品编码"},{default:s(()=>[r(p,{modelValue:i(l).prodCode,"onUpdate:modelValue":e[0]||(e[0]=a=>i(l).prodCode=a),placeholder:"商品编码",clearable:""},null,8,["modelValue"])]),_:1}),r(c,{label:"商品名称"},{default:s(()=>[r(p,{modelValue:i(l).prodName,"onUpdate:modelValue":e[1]||(e[1]=a=>i(l).prodName=a),placeholder:"商品名称",clearable:""},null,8,["modelValue"])]),_:1}),r(c,{label:"平台分类"},{default:s(()=>[r(W,{modelValue:i(h),"onUpdate:modelValue":e[2]||(e[2]=a=>L(h)?h.value=a:null),placeholder:"请选择",clearable:"","expand-trigger":"hover",options:i(T),props:i(B),"change-on-select":"",onChange:U},null,8,["modelValue","options","props"])]),_:1})]),n("div",Ue,[r(c,{label:"累计销量"},{default:s(()=>[n("div",qe,[n("div",ze,[r(p,{modelValue:i(l).saleBeginInp,"onUpdate:modelValue":e[3]||(e[3]=a=>i(l).saleBeginInp=a),type:"number",min:"0",max:"100000"},null,8,["modelValue"])]),e[10]||(e[10]=n("span",{class:"interval-line"},"-",-1)),n("div",Qe,[r(p,{modelValue:i(l).saleEndInp,"onUpdate:modelValue":e[4]||(e[4]=a=>i(l).saleEndInp=a),type:"number",min:"0",max:"100000"},null,8,["modelValue"])])])]),_:1}),r(c,{label:"当前价"},{default:s(()=>[n("div",Oe,[n("div",Ae,[r(p,{modelValue:i(l).currentPriceBeginInp,"onUpdate:modelValue":e[5]||(e[5]=a=>i(l).currentPriceBeginInp=a),type:"number",min:"0",max:"100000"},null,8,["modelValue"])]),e[11]||(e[11]=n("span",{class:"interval-line"},"-",-1)),n("div",He,[r(p,{modelValue:i(l).currentPriceEndInp,"onUpdate:modelValue":e[6]||(e[6]=a=>i(l).currentPriceEndInp=a),type:"number",min:"0",max:"100000"},null,8,["modelValue"])])])]),_:1})]),n("div",$e,[n("div",Je,[r(c,null,{default:s(()=>[r(S,{class:"operation-btn",type:"primary",onClick:e[7]||(e[7]=a=>D())},{default:s(()=>e[12]||(e[12]=[d(" 查询 ")])),_:1,__:[12]})]),_:1})])])]),_:1},8,["model"])]),n("div",je,[n("div",Ge,[r(Y,{modelValue:i(P),"onUpdate:modelValue":e[8]||(e[8]=a=>L(P)?P.value=a:null),onChange:e[9]||(e[9]=a=>q())},{default:s(()=>[r(b,{label:"0"},{default:s(()=>e[13]||(e[13]=[d(" 全部 ")])),_:1,__:[13]}),r(b,{label:"1"},{default:s(()=>e[14]||(e[14]=[d(" 在售中 ")])),_:1,__:[14]}),r(b,{label:"2"},{default:s(()=>e[15]||(e[15]=[d(" 已售罄 ")])),_:1,__:[15]}),r(b,{label:"3"},{default:s(()=>e[16]||(e[16]=[d(" 已下架 ")])),_:1,__:[16]})]),_:1},8,["modelValue"])])]),n("div",Ke,[n("div",{ref_key:"closepopoverRef",ref:E,class:"table"},[r(te,{ref_key:"prodInfTableRef",ref:O,data:i(C).list,"header-cell-style":{background:"#f9f9f9",color:"#606266"},onSelectionChange:Q,onCellMouseEnter:$,onCellMouseLeave:J,onSortChange:A},{default:s(()=>[r(m,{class:"table-item",label:"商品信息",width:"200",fixed:""},{default:s(a=>[n("div",We,[n("div",Xe,[r(Z,{src:a.row.mainImgUrl},null,8,["src"])]),r(ee,{placement:"top-start",trigger:"hover",content:a.row.exhibitionProdName},{reference:s(()=>[n("div",Ye,v(a.row.exhibitionProdName),1)]),_:2},1032,["content"])])]),_:1}),r(m,{class:"table-item",prop:"spuName",label:"商品名称",align:"center"}),r(m,{class:"table-item",prop:"priceFee",label:"当前价",sortable:"custom"},{reference:s(a=>[n("div",Ze,[n("div",et,v(a.row.priceFee),1)])]),_:1}),r(m,{class:"table-item",prop:"marketPriceFee",label:"市场价",sortable:"custom"}),r(m,{class:"table-item",prop:"saleNum",label:"累计销量",sortable:"custom"}),r(m,{class:"table-item",prop:"totalStock",label:"库存",sortable:"custom"},{reference:s(a=>[n("div",tt,[n("div",ot,v(a.row.stock),1)])]),_:1}),r(m,{class:"table-item",prop:"seq",label:"序号",sortable:"custom"},{reference:s(a=>[n("div",at,[n("div",rt,v(a.row.exhibitionSeq),1)])]),_:1}),r(m,{label:"商品状态",prop:"spuStatus",align:"center"},{default:s(({row:a})=>[a.spuStatus===0?(_(),f(I,{key:0,type:"danger"},{default:s(()=>e[17]||(e[17]=[d(" 下架 ")])),_:1,__:[17]})):y("",!0),a.spuStatus===1?(_(),f(I,{key:1},{default:s(()=>e[18]||(e[18]=[d(" 上架 ")])),_:1,__:[18]})):y("",!0),a.spuStatus===2?(_(),f(I,{key:2,type:"danger"},{default:s(()=>e[19]||(e[19]=[d(" 违规下架 ")])),_:1,__:[19]})):y("",!0),a.spuStatus===3?(_(),f(I,{key:3,type:"warning"},{default:s(()=>e[20]||(e[20]=[d(" 等待审核 ")])),_:1,__:[20]})):y("",!0)]),_:1}),r(m,{class:"table-item",label:"操作",width:"200",fixed:"right"},{default:s(({row:a})=>[r(S,{type:"primary",link:"",onClick:ae=>z(a.spuId)},{default:s(()=>e[21]||(e[21]=[d(" 查看详情 ")])),_:2,__:[21]},1032,["onClick"]),e[23]||(e[23]=n("span",{style:{padding:"0 5px"}},"|",-1)),r(S,{type:"primary",link:"",onClick:ae=>H(a.spuId)},{default:s(()=>e[22]||(e[22]=[d(" 删除 ")])),_:2,__:[22]},1032,["onClick"])]),_:1})]),_:1},8,["data"])],512),n("div",nt,[Te(r(oe,{"page-sizes":[10,20,50,100],"current-page":i(V).pageNum,"page-size":i(V).pageSize,total:i(C).total,layout:"total, sizes, prev, pager, next, jumper",background:"",onSizeChange:G,onCurrentChange:K},null,8,["current-page","page-size","total"]),[[Pe,i(C).total>0]])])]),i(R)?(_(),f(xe,{key:0,ref_key:"prodDetailsRef",ref:F},null,512)):y("",!0)])}}},fo=Ve(st,[["__scopeId","data-v-bc80c057"]]);export{fo as default};

var I=Object.defineProperty;var C=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var T=(s,t,r)=>t in s?I(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,$=(s,t)=>{for(var r in t||(t={}))M.call(t,r)&&T(s,r,t[r]);if(C)for(var r of C(t))N.call(t,r)&&T(s,r,t[r]);return s};import{b as R,a as H,s as P,x as S,n as q,y as A,A as J}from"./element-plus@2.9.10_vue@3.5.14-e58ff881.js";import{m as K,t as j,l as z}from"./index-6f2da097.js";import F from"./add-or-update-4f0aacad.js";import{$ as _}from"./_t-d5227884.js";import{q as G,D as Q,b as W,y as B}from"./@vue_reactivity@3.5.14-2213b677.js";import{g as X,$ as Y,a1 as Z,o as i,c as y,a as ee,i as n,I as l,M as d,J as w,H as p,K as te,L as c,n as oe}from"./@vue_runtime-core@3.5.14-81aa8ddd.js";import{U as u}from"./@vue_shared@3.5.14-94c2c668.js";import"./@vue-06e0889c.js";import"./lodash-es@4.17.21-e2bba480.js";import"./@vueuse_shared@9.13.0_vue@3.5.14-f0e16060.js";import"./@vueuse_core@9.13.0_vue@3.5.14-f98106e7.js";import"./@vue_runtime-dom@3.5.14-7e661aa4.js";import"./@element-plus_icons-vue@2.3.1_vue@3.5.14-71698097.js";import"./@sxzz_popperjs-es@2.11.7-7c8154ca.js";import"./@ctrl_tinycolor@3.6.1-86a38320.js";import"./dayjs@1.11.13-c188735a.js";import"./@intlify_core-base@9.2.2-93f07292.js";import"./@intlify_message-compiler@9.2.2-228be59b.js";import"./@intlify_shared@9.2.2-29bf9385.js";import"./source-map@0.6.1-02de534d.js";import"./@intlify_devtools-if@9.2.2-22850edc.js";import"./async-validator@4.2.5-774c2804.js";import"./memoize-one@6.0.0-297ddbcb.js";import"./normalize-wheel-es@1.2.0-ed76fb12.js";import"./@floating-ui_dom@1.7.0-586b25a4.js";import"./@floating-ui_core@1.7.0-7ff28a0e.js";import"./@floating-ui_utils@0.2.9-746d277c.js";import"./pinia@2.3.1_vue@3.5.14-4833dba6.js";import"./vue-demi@0.14.10_vue@3.5.14-71ba0ef2.js";import"./vue-router@4.5.1_vue@3.5.14-0f6ed4bc.js";import"./vue-i18n@9.2.2_vue@3.5.14-cf205787.js";import"./vue@3.5.14-dfc94670.js";import"./vue-cookies@1.8.3-f66fc855.js";import"./@element-plus_icons-vue@2.1.0_vue@3.5.14-0cb2d1d1.js";import"./axios@1.4.0-e76ab20a.js";import"./qs@6.11.2-13302ec8.js";import"./side-channel@1.1.0-f5737a48.js";import"./es-errors@1.3.0-c75f5a96.js";import"./object-inspect@1.13.4-95f40997.js";import"./crypto-js@4.1.1-4a4e7433.js";import"./side-channel-list@1.0.0-2bff8a80.js";import"./side-channel-map@1.0.1-ef12932d.js";import"./get-intrinsic@1.3.0-829e561c.js";import"./es-object-atoms@1.1.1-11ea1ab9.js";import"./math-intrinsics@1.1.0-9389030e.js";import"./gopd@1.2.0-f4eec54c.js";import"./es-define-property@1.0.1-88d30046.js";import"./has-symbols@1.1.0-1e41ff1e.js";import"./get-proto@1.0.1-a9f527cc.js";import"./dunder-proto@1.0.1-62f72dc7.js";import"./call-bind-apply-helpers@1.0.2-03b6ca7f.js";import"./function-bind@1.1.2-48f717dc.js";import"./hasown@2.0.2-f810df7c.js";import"./call-bound@1.0.4-15e4d619.js";import"./side-channel-weakmap@1.0.2-460ea971.js";import"./big.js@6.2.1-49ab783c.js";import"./dompurify@3.0.3-4985f3f0.js";import"./moment@2.29.4-4717c495.js";import"./index-4e3cd12b.js";const re={class:"page-shop-menu"},ie={class:"filter-container"},ae={key:0},ne={key:1},le={key:2},_t={__name:"index",setup(s){const t=G({menulist:[],pageLoading:!0,searchParam:{sysType:1},addOrUpdateVisible:!1}),{menulist:r,addOrUpdateVisible:x}=Q(t);X(()=>{f()});const f=()=>{t.pageLoading=!0,K($({},t.searchParam)).then(a=>{a.forEach(e=>{e.component==="Layout"&&(e.component=""),e.hidden===!0?e.hidden="是":e.hidden="否"}),t.menulist=j(a),t.pageLoading=!1})},h=W(),k=a=>{t.addOrUpdateVisible=!0,oe(()=>{h.value.init(a)})},D=a=>{R.confirm(_("table.sureToDelete"),_("table.tips"),{confirmButtonText:_("table.confirm"),cancelButtonText:_("table.cancel"),type:"warning"}).then(()=>E(a))},E=a=>{z(a,1).then(()=>{H({message:_("table.actionSuccess"),type:"success",duration:1500,onClose:()=>f()})})};return(a,e)=>{const g=P,m=S,U=q,L=Y("svg-icon"),v=A,V=J,b=Z("permission");return i(),y("div",re,[ee("div",ie,[n(g,{class:"filter-item",onClick:e[0]||(e[0]=o=>f())},{default:l(()=>[d(u(a.$t("table.search")),1)]),_:1}),w((i(),p(g,{type:"primary",class:"filter-item",onClick:e[1]||(e[1]=o=>k())},{default:l(()=>[d(u(a.$t("table.create")),1)]),_:1})),[[b,["rbac:menu:save"]]])]),n(V,{data:B(r),border:"",style:{width:"100%"},"row-key":"id"},{default:l(()=>[n(m,{prop:"meta.title","header-align":"center","tree-key":"id",width:"150",label:"名称"}),n(m,{"header-align":"center",align:"center",label:"图标"},{default:l(o=>[o.row.meta.icon&&o.row.meta.icon.includes("plus")?(i(),y("span",ae,[o.row.meta.icon?(i(),p(U,{key:0},{default:l(()=>[o.row.meta.icon?(i(),p(te(o.row.meta.icon.slice(0,-4)),{key:0,class:"icons"})):c("",!0)]),_:2},1024)):c("",!0)])):c("",!0),o.row.meta.icon&&!o.row.meta.icon.includes("plus")?(i(),y("span",ne,[n(L,{"icon-class":o.row.meta.icon},null,8,["icon-class"])])):c("",!0),o.row.meta.icon?c("",!0):(i(),y("span",le,"-"))]),_:1}),n(m,{prop:"type","header-align":"center",align:"center",label:"类型"},{default:l(o=>[o.row.component===""?(i(),p(v,{key:0},{default:l(()=>e[3]||(e[3]=[d(u("目录"))])),_:1,__:[3]})):(i(),p(v,{key:1,type:"success"},{default:l(()=>e[4]||(e[4]=[d(u("菜单"))])),_:1,__:[4]}))]),_:1}),n(m,{prop:"seq","header-align":"center",align:"center",label:"排序号"}),n(m,{prop:"path","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"菜单Url"}),n(m,{prop:"component","header-align":"center",align:"center",width:"150","show-overflow-tooltip":!0,label:"组件路径"}),n(m,{prop:"hidden","header-align":"center",align:"center",label:"菜单隐藏"}),n(m,{fixed:"right","header-align":"center",align:"center",width:"150",label:"操作"},{default:l(o=>[w((i(),p(g,{type:"primary",link:"",onClick:O=>k(o.row.id)},{default:l(()=>e[5]||(e[5]=[d(u("编辑"))])),_:2,__:[5]},1032,["onClick"])),[[b,["rbac:menu:update"]]]),w((i(),p(g,{type:"primary",link:"",onClick:O=>D(o.row.id)},{default:l(()=>e[6]||(e[6]=[d(u("删除"))])),_:2,__:[6]},1032,["onClick"])),[[b,["rbac:menu:delete"]]])]),_:1})]),_:1},8,["data"]),B(x)?(i(),p(F,{key:0,ref_key:"addOrUpdateRef",ref:h,onRefreshDataList:e[2]||(e[2]=o=>f())},null,512)):c("",!0)])}}};export{_t as default};
